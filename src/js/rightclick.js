!function(){"update_url"in chrome.runtime.getManifest()&&(console.log=console.error=function(){});var t={};chrome.storage.local.get(null,function(e){t=e,l()});chrome.storage.onChanged.addListener(function(e,i){if("local"==i)for(key in e)t[key]=e[key].newValue});var e=function(e,i){var n=Date.now();for(key in e)t[key]=e[key],key.match(/\+ts$/)||(t[key+"+ts"]=e[key+"+ts"]=n);chrome.storage.local.set(e,i)},i=(navigator.platform.indexOf("Win"),-1!=navigator.platform.indexOf("Mac")),n=-1!=navigator.platform.indexOf("CrOS"),o=-1!=navigator.platform.indexOf("Linux");chrome.permissions.contains({permissions:["nativeMessaging"]},function(t){chrome.runtime.getBackgroundPage(function(t){t.connectNative()})});var l=function(){$(function(){$("#doubleclick, #chromeosdouble").click(function(){e({blockDoubleclickAlert:!0}),window.close()}),$("#installplugin").click(function(){e({blockDoubleclickAlert:!1}),chrome.permissions.request({permissions:["nativeMessaging"]},function(n){if(n||t.forceInstallRightclick){t.forceInstallRightclick&&e({forceInstallRightclick:!1}),chrome.runtime.getBackgroundPage(function(t){t.connectNative(10)});var o=document.createElement("a");i?(o.setAttribute("href","/nat/SmoothGesturesPlusExtras-0.7.dmg"),o.setAttribute("download","SmoothGesturesPlusExtras-0.7.dmg")):(o.setAttribute("href","/nat/smoothgesturesplus-extras-0.6.tar.gz"),o.setAttribute("download","smoothgesturesplus-extras-0.6.tar.gz")),o.click(),$("p, div").css({display:"none"}),$("#arrow, #instruct").css({display:"block"})}})}),i&&$("#instruct").html("<ul><li>Open the dmg file</li><li>Right-click the app > Open</li></ul>"),o&&$("#instruct").html("<ul><li>Extract the tar file</li><li>Run install.py</li></ul>"),n&&($("#extras").hide(),$("#chromeos").show()),t.forceInstallRightclick&&$("#installplugin").click()})}}();