!function(){"update_url"in chrome.runtime.getManifest()&&(console.log=console.error=function(){});var t={};chrome.storage.local.get(null,function(e){t=e,c()});var e=function(e,i){if("local"==i)for(key in e)t[key]=e[key].newValue};chrome.storage.onChanged.addListener(e);var i=function(e,i){var n=Date.now();for(key in e)t[key]=e[key],key.match(/\+ts$/)||(t[key+"+ts"]=e[key+"+ts"]=n);chrome.storage.local.set(e,i)},n=(-1!=navigator.platform.indexOf("Win"),-1!=navigator.platform.indexOf("Mac")),o=-1!=navigator.platform.indexOf("CrOS"),l=-1!=navigator.platform.indexOf("Linux");chrome.permissions.contains({permissions:["nativeMessaging"]},function(){chrome.runtime.getBackgroundPage(function(t){t.connectNative()})});var c=function(){$(function(){$("#doubleclick, #chromeosdouble").click(function(){i({blockDoubleclickAlert:!0}),window.close()}),$("#installplugin").click(function(){i({blockDoubleclickAlert:!1}),chrome.permissions.request({permissions:["nativeMessaging"]},function(e){if(e||t.forceInstallRightclick){t.forceInstallRightclick&&i({forceInstallRightclick:!1}),chrome.runtime.getBackgroundPage(function(t){t.connectNative(10)});var o=document.createElement("a");n?(o.setAttribute("href","/nat/SmoothGesturesPlusExtras-0.7.dmg"),o.setAttribute("download","SmoothGesturesPlusExtras-0.7.dmg")):(o.setAttribute("href","/nat/smoothgesturesplus-extras-0.6.tar.gz"),o.setAttribute("download","smoothgesturesplus-extras-0.6.tar.gz")),o.click(),$("p, div").css({display:"none"}),$("#arrow, #instruct").css({display:"block"})}})}),n&&$("#instruct").html("<ul><li>Open the dmg file</li><li>Right-click the app > Open</li></ul>"),l&&$("#instruct").html("<ul><li>Extract the tar file</li><li>Run install.py</li></ul>"),o&&($("#extras").hide(),$("#chromeos").show()),t.forceInstallRightclick&&$("#installplugin").click()})}}();