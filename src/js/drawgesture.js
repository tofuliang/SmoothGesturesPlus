!function(){"update_url"in chrome.runtime.getManifest()&&(console.log=console.error=function(){});var t={};chrome.storage.local.get(null,function(e){t=e});var e=function(e,x){if("local"==x)for(key in e)t[key]=e[key].newValue};chrome.storage.onChanged.addListener(e),window.drawGesture=function(e,c,i,r){var s="";"s"==e[0]?(s="s",e=e.substr(1)):"l"==e[0]?(s="l",e=e.substr(1)):"i"==e[0]&&(s="i",e=e.substr(1));var y;y="r"==e[0]?o(e,c):"w"==e[0]?n(e,c):"k"==e[0]?a(e,c):x(e,c,i,r),$(y).css({"min-height":"2em",overflow:"hidden"});var l=null;return"s"==s?l="* "+chrome.i18n.getMessage("context_with_selection"):"l"==s?l="* "+chrome.i18n.getMessage("context_on_link"):"i"==s?l="* "+chrome.i18n.getMessage("context_on_image"):t.gestures["s"+e]?l="* "+chrome.i18n.getMessage("context_not_selection"):t.gestures["l"+e]&&t.gestures["i"+e]?l="* "+chrome.i18n.getMessage("context_not_links_images"):t.gestures["l"+e]?l="* "+chrome.i18n.getMessage("context_not_link"):t.gestures["i"+e]&&(l="* "+chrome.i18n.getMessage("context_not_image")),l?$("<div>").css({width:c+"px",overflow:"hidden"}).append($("<div>").css({"font-size":12*Math.sqrt(c/100)+"px",color:"#888","text-align":"right","margin-right":".3em",height:"0px",position:"relative",top:".1em"}).text(l)).append(y):y};var x=function(e,x,o,n){var c=document.createElement("canvas");c.width=x,c.height=o,ctx=c.getContext("2d"),ctx.strokeStyle="rgba("+t.trailColor.r+","+t.trailColor.g+","+t.trailColor.b+","+t.trailColor.a+")",ctx.lineWidth=n?n:3,ctx.lineCap="butt";var r=10,a=2,s=3,y={x:0,y:0},l={x:0,y:0},g={x:0,y:0},h={x:0,y:0},u=function(t){y=l,ctx.lineTo(y.x,y.y),"U"==t?l={x:y.x,y:y.y-.75*r}:"D"==t?l={x:y.x,y:y.y+.75*r}:"L"==t?l={x:y.x-.75*r,y:y.y}:"R"==t?l={x:y.x+.75*r,y:y.y}:"1"==t?l={x:y.x-.5*r,y:y.y+.5*r}:"3"==t?l={x:y.x+.5*r,y:y.y+.5*r}:"7"==t?l={x:y.x-.5*r,y:y.y-.5*r}:"9"==t&&(l={x:y.x+.5*r,y:y.y-.5*r}),ctx.lineTo(l.x,l.y),d()},p=function(t){y=l,ctx.lineTo(y.x,y.y),"UD"==t?(l={x:y.x,y:y.y-r},d(),ctx.lineTo(y.x,y.y-r),ctx.arc(y.x+a,y.y-r,a,Math.PI,0,!1),ctx.lineTo(y.x+2*a,y.y)):"UL"==t?ctx.arc(y.x-r,y.y,r,0,-Math.PI/2,!0):"UR"==t?ctx.arc(y.x+r,y.y,r,Math.PI,-Math.PI/2,!1):"DU"==t?(l={x:y.x,y:y.y+r},d(),ctx.lineTo(y.x,y.y+r),ctx.arc(y.x+a,y.y+r,a,Math.PI,0,!0),ctx.lineTo(y.x+2*a,y.y)):"DL"==t?ctx.arc(y.x-r,y.y,r,0,Math.PI/2,!1):"DR"==t?ctx.arc(y.x+r,y.y,r,Math.PI,Math.PI/2,!0):"LU"==t?ctx.arc(y.x,y.y-r,r,Math.PI/2,Math.PI,!1):"LD"==t?ctx.arc(y.x,y.y+r,r,-Math.PI/2,Math.PI,!0):"LR"==t?(l={x:y.x-r,y:y.y},d(),ctx.lineTo(y.x-r,y.y),ctx.arc(y.x-r,y.y+a,a,-Math.PI/2,Math.PI/2,!0),ctx.lineTo(y.x,y.y+2*a)):"RU"==t?ctx.arc(y.x,y.y-r,r,Math.PI/2,0,!0):"RD"==t?ctx.arc(y.x,y.y+r,r,-Math.PI/2,0,!1):"RL"==t?(l={x:y.x+r,y:y.y},d(),ctx.lineTo(y.x+r,y.y),ctx.arc(y.x+r,y.y+a,a,-Math.PI/2,Math.PI/2,!1),ctx.lineTo(y.x,y.y+2*a)):(u(t[0]),u(t[1])),"UD"==t?l={x:y.x+2*a,y:y.y+s}:"UL"==t?l={x:y.x-r,y:y.y-r}:"UR"==t?l={x:y.x+r+s,y:y.y-r}:"DU"==t?l={x:y.x+2*a,y:y.y}:"DL"==t?l={x:y.x-r,y:y.y+r}:"DR"==t?l={x:y.x+r+s,y:y.y+r}:"LU"==t?l={x:y.x-r,y:y.y-r}:"LD"==t?l={x:y.x-r,y:y.y+r+s}:"LR"==t?l={x:y.x+s,y:y.y+2*a}:"RU"==t?l={x:y.x+r,y:y.y-r}:"RD"==t?l={x:y.x+r,y:y.y+r+s}:"RL"==t&&(l={x:y.x,y:y.y+2*a}),d()},d=function(){l.x>g.x&&(g.x=l.x),l.y>g.y&&(g.y=l.y),l.x<h.x&&(h.x=l.x),l.y<h.y&&(h.y=l.y)};for(ctx.beginPath(),u(e[0]),i=0;i<e.length-1;i++)p(e[i]+e[i+1]);u(e[e.length-1]),ctx.stroke();var M={x:(g.x+h.x)/2,y:(g.y+h.y)/2},m=(g.x-h.x+r)/x,P=(g.y-h.y+r)/o,v=P>m?P:m;for(r/=v,s/=v,a/=v,a>6&&(a=6),l={x:0,y:0},ctx.clearRect(0,0,c.width,c.height),ctx.save(),ctx.translate(x/2-M.x/v,o/2-M.y/v),ctx.beginPath(),u(e[0]),i=0;i<e.length-1;i++)p(e[i]+e[i+1]);return u(e[e.length-1]),ctx.stroke(),ctx.fillStyle="rgba("+t.trailColor.r+","+t.trailColor.g+","+t.trailColor.b+","+t.trailColor.a+")",ctx.beginPath(),"U"==e[e.length-1]?(ctx.moveTo(l.x-5,l.y+2),ctx.lineTo(l.x+5,l.y+2),ctx.lineTo(l.x,l.y-3)):"D"==e[e.length-1]?(ctx.moveTo(l.x-5,l.y-2),ctx.lineTo(l.x+5,l.y-2),ctx.lineTo(l.x,l.y+3)):"L"==e[e.length-1]?(ctx.moveTo(l.x+2,l.y-5),ctx.lineTo(l.x+2,l.y+5),ctx.lineTo(l.x-3,l.y)):"R"==e[e.length-1]?(ctx.moveTo(l.x-2,l.y-5),ctx.lineTo(l.x-2,l.y+5),ctx.lineTo(l.x+3,l.y)):"1"==e[e.length-1]?(ctx.moveTo(l.x-2,l.y-6),ctx.lineTo(l.x+6,l.y+2),ctx.lineTo(l.x-2,l.y+2)):"3"==e[e.length-1]?(ctx.moveTo(l.x+2,l.y-6),ctx.lineTo(l.x-6,l.y+2),ctx.lineTo(l.x+2,l.y+2)):"7"==e[e.length-1]?(ctx.moveTo(l.x-2,l.y+6),ctx.lineTo(l.x+6,l.y-2),ctx.lineTo(l.x-2,l.y-2)):"9"==e[e.length-1]&&(ctx.moveTo(l.x+2,l.y+6),ctx.lineTo(l.x-6,l.y-2),ctx.lineTo(l.x+2,l.y-2)),ctx.closePath(),ctx.fill(),ctx.restore(),c},o=function(t,e){var x="L"==t[1]?0:"M"==t[1]?1:2,o="L"==t[2]?0:"M"==t[2]?1:2;return $("<div>").css({width:e-2+"px",padding:"5px 1px"}).append($("<div>").text(chrome.i18n.getMessage("gesture_"+t)).css({"font-size":14*Math.sqrt(e/100)+"px",color:"#111","text-align":"center","font-weight":"bold"})).append($("<div>").text(chrome.i18n.getMessage("gesture_rocker_descrip",[chrome.i18n.getMessage("options_mousebutton_"+x),chrome.i18n.getMessage("options_mousebutton_"+o)])).css({"font-size":12*Math.sqrt(e/100)+"px",color:"#666","text-align":"center"}))},n=function(t,e){return $("<div>").css({width:e-2+"px",padding:"5px 1px"}).append($("<div>").text(chrome.i18n.getMessage("gesture_"+t)).css({"font-size":14*Math.sqrt(e/100)+"px",color:"#111","text-align":"center","font-weight":"bold"})).append($("<div>").text(chrome.i18n.getMessage("gesture_"+t+"_descrip")).css({"font-size":12*Math.sqrt(e/100)+"px",color:"#666","text-align":"center"}))},c={};c[8]="Backspace",c[9]="Tab",c[13]="Enter",c[19]="Pause",c[20]="Caps Lock",c[27]="Esc",c[32]="Space",c[33]="Page Up",c[34]="Page Down",c[35]="End",c[36]="Home",c[37]="Left",c[38]="Up",c[39]="Right",c[40]="Down",c[45]="Insert",c[46]="Delete",c[96]="NP 0",c[97]="NP 1",c[98]="NP 2",c[99]="NP 3",c[100]="NP 4",c[101]="NP 5",c[102]="NP 6",c[103]="NP 7",c[104]="NP 8",c[105]="NP 9",c[106]="NP *",c[107]="NP +",c[109]="NP -",c[110]="NP .",c[111]="NP /",c[144]="Num Lock",c[145]="Scroll Lock",c[186]=";",c[187]="=",c[188]=",",c[189]="-",c[190]=".",c[191]="/",c[192]="~",c[219]="[",c[220]="\\",c[221]="]",c[222]="'";var r=function(t){var t=t.split(":"),e=t[1],x=t[2];if(!e||""==e)return"empty";if("U+"!=e.substr(0,2))return e;var o=c[x];return o?o:JSON.parse('"\\u'+e.substr(2)+'"')},a=function(t,e){return $("<div>").css({width:e-2+"px",padding:"5px 1px"}).append($("<div>").text(("1"==t[1]?"Ctrl + ":"")+("1"==t[2]?"Alt + ":"")+("1"==t[3]?"Shift + ":"")+("1"==t[4]?"Meta + ":"")+r(t)).css({"font-size":14*Math.sqrt(e/100)+"px",color:"#666","text-align":"center","font-weight":"bold"}))}}();