!function(){"update_url"in chrome.runtime.getManifest()&&(console.log=console.error=function(){});var t={};chrome.storage.local.get(null,function(e){t=e});chrome.storage.onChanged.addListener(function(e,x){if("local"==x)for(key in e)t[key]=e[key].newValue}),window.drawGesture=function(n,c,i,a){var s="";"s"==n[0]?(s="s",n=n.substr(1)):"l"==n[0]?(s="l",n=n.substr(1)):"i"==n[0]&&(s="i",n=n.substr(1));var y;y="r"==n[0]?x(n,c):"w"==n[0]?o(n,c):"k"==n[0]?r(n,c):e(n,c,i,a),$(y).css({"min-height":"2em",overflow:"hidden"});var l=null;return"s"==s?l="* "+chrome.i18n.getMessage("context_with_selection"):"l"==s?l="* "+chrome.i18n.getMessage("context_on_link"):"i"==s?l="* "+chrome.i18n.getMessage("context_on_image"):t.gestures["s"+n]?l="* "+chrome.i18n.getMessage("context_not_selection"):t.gestures["l"+n]&&t.gestures["i"+n]?l="* "+chrome.i18n.getMessage("context_not_links_images"):t.gestures["l"+n]?l="* "+chrome.i18n.getMessage("context_not_link"):t.gestures["i"+n]&&(l="* "+chrome.i18n.getMessage("context_not_image")),l?$("<div>").css({width:c+"px",overflow:"hidden"}).append($("<div>").css({"font-size":12*Math.sqrt(c/100)+"px",color:"#888","text-align":"right","margin-right":".3em",height:"0px",position:"relative",top:".1em"}).text(l)).append(y):y};var e=function(e,x,o,n){var c=document.createElement("canvas");c.width=x,c.height=o,ctx=c.getContext("2d"),ctx.strokeStyle="rgba("+t.trailColor.r+","+t.trailColor.g+","+t.trailColor.b+","+t.trailColor.a+")",ctx.lineWidth=n||3,ctx.lineCap="butt";var r=10,a=2,s=3,y={x:0,y:0},l={x:0,y:0},g={x:0,y:0},h={x:0,y:0},u=function(t){y=l,ctx.lineTo(y.x,y.y),"U"==t?l={x:y.x,y:y.y-.75*r}:"D"==t?l={x:y.x,y:y.y+.75*r}:"L"==t?l={x:y.x-.75*r,y:y.y}:"R"==t?l={x:y.x+.75*r,y:y.y}:"1"==t?l={x:y.x-.5*r,y:y.y+.5*r}:"3"==t?l={x:y.x+.5*r,y:y.y+.5*r}:"7"==t?l={x:y.x-.5*r,y:y.y-.5*r}:"9"==t&&(l={x:y.x+.5*r,y:y.y-.5*r}),ctx.lineTo(l.x,l.y),d()},p=function(t){y=l,ctx.lineTo(y.x,y.y),"UD"==t?(l={x:y.x,y:y.y-r},d(),ctx.lineTo(y.x,y.y-r),ctx.arc(y.x+a,y.y-r,a,Math.PI,0,!1),ctx.lineTo(y.x+2*a,y.y)):"UL"==t?ctx.arc(y.x-r,y.y,r,0,-Math.PI/2,!0):"UR"==t?ctx.arc(y.x+r,y.y,r,Math.PI,-Math.PI/2,!1):"DU"==t?(l={x:y.x,y:y.y+r},d(),ctx.lineTo(y.x,y.y+r),ctx.arc(y.x+a,y.y+r,a,Math.PI,0,!0),ctx.lineTo(y.x+2*a,y.y)):"DL"==t?ctx.arc(y.x-r,y.y,r,0,Math.PI/2,!1):"DR"==t?ctx.arc(y.x+r,y.y,r,Math.PI,Math.PI/2,!0):"LU"==t?ctx.arc(y.x,y.y-r,r,Math.PI/2,Math.PI,!1):"LD"==t?ctx.arc(y.x,y.y+r,r,-Math.PI/2,Math.PI,!0):"LR"==t?(l={x:y.x-r,y:y.y},d(),ctx.lineTo(y.x-r,y.y),ctx.arc(y.x-r,y.y+a,a,-Math.PI/2,Math.PI/2,!0),ctx.lineTo(y.x,y.y+2*a)):"RU"==t?ctx.arc(y.x,y.y-r,r,Math.PI/2,0,!0):"RD"==t?ctx.arc(y.x,y.y+r,r,-Math.PI/2,0,!1):"RL"==t?(l={x:y.x+r,y:y.y},d(),ctx.lineTo(y.x+r,y.y),ctx.arc(y.x+r,y.y+a,a,-Math.PI/2,Math.PI/2,!1),ctx.lineTo(y.x,y.y+2*a)):(u(t[0]),u(t[1])),"UD"==t?l={x:y.x+2*a,y:y.y+s}:"UL"==t?l={x:y.x-r,y:y.y-r}:"UR"==t?l={x:y.x+r+s,y:y.y-r}:"DU"==t?l={x:y.x+2*a,y:y.y}:"DL"==t?l={x:y.x-r,y:y.y+r}:"DR"==t?l={x:y.x+r+s,y:y.y+r}:"LU"==t?l={x:y.x-r,y:y.y-r}:"LD"==t?l={x:y.x-r,y:y.y+r+s}:"LR"==t?l={x:y.x+s,y:y.y+2*a}:"RU"==t?l={x:y.x+r,y:y.y-r}:"RD"==t?l={x:y.x+r,y:y.y+r+s}:"RL"==t&&(l={x:y.x,y:y.y+2*a}),d()},d=function(){l.x>g.x&&(g.x=l.x),l.y>g.y&&(g.y=l.y),l.x<h.x&&(h.x=l.x),l.y<h.y&&(h.y=l.y)};for(ctx.beginPath(),u(e[0]),i=0;i<e.length-1;i++)p(e[i]+e[i+1]);u(e[e.length-1]),ctx.stroke();var M={x:(g.x+h.x)/2,y:(g.y+h.y)/2},m=(g.x-h.x+r)/x,P=(g.y-h.y+r)/o,T=P>m?P:m;for(r/=T,s/=T,(a/=T)>6&&(a=6),l={x:0,y:0},ctx.clearRect(0,0,c.width,c.height),ctx.save(),ctx.translate(x/2-M.x/T,o/2-M.y/T),ctx.beginPath(),u(e[0]),i=0;i<e.length-1;i++)p(e[i]+e[i+1]);return u(e[e.length-1]),ctx.stroke(),ctx.fillStyle="rgba("+t.trailColor.r+","+t.trailColor.g+","+t.trailColor.b+","+t.trailColor.a+")",ctx.beginPath(),"U"==e[e.length-1]?(ctx.moveTo(l.x-5,l.y+2),ctx.lineTo(l.x+5,l.y+2),ctx.lineTo(l.x,l.y-3)):"D"==e[e.length-1]?(ctx.moveTo(l.x-5,l.y-2),ctx.lineTo(l.x+5,l.y-2),ctx.lineTo(l.x,l.y+3)):"L"==e[e.length-1]?(ctx.moveTo(l.x+2,l.y-5),ctx.lineTo(l.x+2,l.y+5),ctx.lineTo(l.x-3,l.y)):"R"==e[e.length-1]?(ctx.moveTo(l.x-2,l.y-5),ctx.lineTo(l.x-2,l.y+5),ctx.lineTo(l.x+3,l.y)):"1"==e[e.length-1]?(ctx.moveTo(l.x-2,l.y-6),ctx.lineTo(l.x+6,l.y+2),ctx.lineTo(l.x-2,l.y+2)):"3"==e[e.length-1]?(ctx.moveTo(l.x+2,l.y-6),ctx.lineTo(l.x-6,l.y+2),ctx.lineTo(l.x+2,l.y+2)):"7"==e[e.length-1]?(ctx.moveTo(l.x-2,l.y+6),ctx.lineTo(l.x+6,l.y-2),ctx.lineTo(l.x-2,l.y-2)):"9"==e[e.length-1]&&(ctx.moveTo(l.x+2,l.y+6),ctx.lineTo(l.x-6,l.y-2),ctx.lineTo(l.x+2,l.y-2)),ctx.closePath(),ctx.fill(),ctx.restore(),c},x=function(t,e){var x="L"==t[1]?0:"M"==t[1]?1:2,o="L"==t[2]?0:"M"==t[2]?1:2;return $("<div>").css({width:e-2+"px",padding:"5px 1px"}).append($("<div>").text(chrome.i18n.getMessage("gesture_"+t)).css({"font-size":14*Math.sqrt(e/100)+"px",color:"#111","text-align":"center","font-weight":"bold"})).append($("<div>").text(chrome.i18n.getMessage("gesture_rocker_descrip",[chrome.i18n.getMessage("options_mousebutton_"+x),chrome.i18n.getMessage("options_mousebutton_"+o)])).css({"font-size":12*Math.sqrt(e/100)+"px",color:"#666","text-align":"center"}))},o=function(t,e){return $("<div>").css({width:e-2+"px",padding:"5px 1px"}).append($("<div>").text(chrome.i18n.getMessage("gesture_"+t)).css({"font-size":14*Math.sqrt(e/100)+"px",color:"#111","text-align":"center","font-weight":"bold"})).append($("<div>").text(chrome.i18n.getMessage("gesture_"+t+"_descrip")).css({"font-size":12*Math.sqrt(e/100)+"px",color:"#666","text-align":"center"}))},n={};n[8]="Backspace",n[9]="Tab",n[13]="Enter",n[19]="Pause",n[20]="Caps Lock",n[27]="Esc",n[32]="Space",n[33]="Page Up",n[34]="Page Down",n[35]="End",n[36]="Home",n[37]="Left",n[38]="Up",n[39]="Right",n[40]="Down",n[45]="Insert",n[46]="Delete",n[96]="NP 0",n[97]="NP 1",n[98]="NP 2",n[99]="NP 3",n[100]="NP 4",n[101]="NP 5",n[102]="NP 6",n[103]="NP 7",n[104]="NP 8",n[105]="NP 9",n[106]="NP *",n[107]="NP +",n[109]="NP -",n[110]="NP .",n[111]="NP /",n[144]="Num Lock",n[145]="Scroll Lock",n[186]=";",n[187]="=",n[188]=",",n[189]="-",n[190]=".",n[191]="/",n[192]="~",n[219]="[",n[220]="\\",n[221]="]",n[222]="'";var c=function(t){var e=(t=t.split(":"))[1],x=t[2];if(!e||""==e)return"empty";if("U+"!=e.substr(0,2))return e;var o=n[x];return o||JSON.parse('"\\u'+e.substr(2)+'"')},r=function(t,e){return $("<div>").css({width:e-2+"px",padding:"5px 1px"}).append($("<div>").text(("1"==t[1]?"Ctrl + ":"")+("1"==t[2]?"Alt + ":"")+("1"==t[3]?"Shift + ":"")+("1"==t[4]?"Meta + ":"")+c(t)).css({"font-size":14*Math.sqrt(e/100)+"px",color:"#666","text-align":"center","font-weight":"bold"}))}}();